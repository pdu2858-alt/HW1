
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Linear Regression</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 2em;
        }
        .container {
            display: flex;
            gap: 2em;
        }
        .controls {
            width: 300px;
        }
        .plot {
            flex-grow: 1;
        }
    </style>
</head>
<body>
    <h1>Simple Linear Regression with CRISP-DM</h1>

    <div class="container">
        <div class="controls">
            <h2>Controls</h2>
            <form method="POST">
                <label for="a">Slope (a):</label><br>
                <input type="range" id="a" name="a" min="-5" max="5" value="{{ a }}" step="0.1" oninput="this.nextElementSibling.value = this.value">
                <output>{{ a }}</output><br><br>

                <label for="noise">Noise:</label><br>
                <input type="range" id="noise" name="noise" min="0" max="10" value="{{ noise }}" step="0.1" oninput="this.nextElementSibling.value = this.value">
                <output>{{ noise }}</output><br><br>

                <label for="n_points">Number of Points:</label><br>
                <input type="range" id="n_points" name="n_points" min="10" max="500" value="{{ n_points }}" step="10" oninput="this.nextElementSibling.value = this.value">
                <output>{{ n_points }}</output><br><br>

                <button type="submit">Generate and Train</button>
            </form>

            <hr>

            <h3>CRISP-DM Steps:</h3>
            <ol>
                <li><b>Business Understanding:</b> Visualize how parameters (slope, noise, data size) affect a simple linear regression model.</li>
                <li><b>Data Understanding:</b> Synthetic data is generated based on user inputs. The underlying "true" model is y = ax + 5.</li>
                <li><b>Data Preparation:</b> Generate X values and corresponding y values with added random noise.</li>
                <li><b>Modeling:</b> A linear regression model is trained on the generated (X, y) data points.</li>
                <li><b>Evaluation:</b> The plot shows the original data, the "true" line, and the fitted regression line. We also see the learned model coefficients.</li>
                <li><b>Deployment:</b> This web application serves as the deployment of the model.</li>
            </ol>
        </div>

        <div class="plot">
            <h2>Results</h2>
            <img src="data:image/png;base64,{{ plot_url }}" alt="Linear Regression Plot">
            <h3>Model Evaluation:</h3>
            <p><b>Learned Slope (Coefficient):</b> {{ model_coef | round(4) }}</p>
            <p><b>Learned Intercept:</b> {{ model_intercept | round(4) }}</p>
        </div>
    </div>

</body>
</html>
